<!-- 简答题答案以及说明 -->


# 简答

## 一、Webpack 的构建流程主要有哪些环节？如果可以请尽可能详尽的描述 Webpack 打包的整个过程。

首先解析命令行参数和config配置，生成一个option 配置，webpack开始初始化，根据之前的option生成compiler对象，初始化内置插件以及loader，读取入口文件，分析，递归读取依赖的文件内容，生成AST语法树，在递归过程中，根据文件类型和loader配置还有plugin，处理，然后递归此操作，直到所有模块解析完，递归结束后，输出生成文件。


## 二、Loader和plugin有哪些不同，请讲述一下Loader和plugin的思路

loader 是处理资源模块的转换和加载（编译转换代码、文件操作、代码检查等）

plugin解决自动化的其他操作，完善其他自动化操作

loader开发思路：创建一个js，暴露出一个函数，函数的内部处理资源内容，加工输出，返回的结果是一个js代码片段，

plugin开发思路：
- plugin 是通过钩子机制实现的，我们可以在不同的事件节点上挂载不同的任务，就可以扩展一个插件
- 插件必须是一个函数或者是一个包含 apply 方法的对象
一般可以把插件定义为一个类型，在类型中定义一个apply 方法
- apply 方法接收一个 compiler 参数，包含了这次构建的所有配置信息，通过这个对象注册钩子函数
- 通过 compiler.hooks.emit.tap 注册钩子函数（emit也可以为其他事件），钩子函数第一个参数为插件名称，第二个参数 compilation 为此次打包的上下文，根据 compilation.assets 就可以拿到此次打包的资源，做一些相应的逻辑处理

